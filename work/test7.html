<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¾å¤‡æ ¡å‡†æµ‹è¯•ç³»ç»Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .calibration-progress {
            height: 8px;
            transition: width 0.3s ease;
        }

        .test-simulation {
            background: linear-gradient(45deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%);
            backdrop-filter: blur(8px);
        }

        .gas-type-indicator {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            animation: gas-pulse 1.5s infinite;
        }

        @keyframes gas-pulse {
            0% { box-shadow: 0 0 0 0 rgba(248, 113, 113, 0.4); }
            100% { box-shadow: 0 0 0 12px rgba(248, 113, 113, 0); }
        }
    </style>
</head>
<body class="bg-slate-800 text-gray-100 min-h-screen p-6">
    <div class="max-w-4xl mx-auto">
        <!-- æ¨¡å¼åˆ‡æ¢ -->
        <div class="flex gap-2 mb-6">
            <button class="px-4 py-2 bg-slate-700 rounded-t-lg active-tab" data-tab="calibration">æ ¡å‡†æ¨¡å¼</button>
            <button class="px-4 py-2 bg-slate-700 rounded-t-lg" data-tab="simulation">ä»¿çœŸæµ‹è¯•</button>
        </div>

        <!-- æ ¡å‡†æ¨¡å¼ -->
        <div id="calibration" class="tab-content">
            <!-- è‡ªåŠ¨æ ¡å‡† -->
            <div class="bg-slate-700/50 rounded-lg p-6 mb-6">
                <h3 class="text-xl font-bold mb-4">ğŸ”§ è‡ªåŠ¨æ ¡å‡†ç³»ç»Ÿ</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- æ ¡å‡†çŠ¶æ€ -->
                    <div class="p-4 rounded-lg bg-slate-600/50">
                        <div class="flex justify-between mb-2">
                            <span>æ ¡å‡†çŠ¶æ€ï¼š</span>
                            <span class="calibration-status text-emerald-400">å¾…æœºä¸­</span>
                        </div>
                        <div class="h-2 bg-slate-500 rounded-full">
                            <div class="calibration-progress bg-emerald-400 rounded-full w-0"></div>
                        </div>
                    </div>

                    <!-- æ ¡å‡†è®°å½• -->
                    <div class="p-4 rounded-lg bg-slate-600/50">
                        <div class="flex justify-between items-center mb-2">
                            <span>ä¸Šæ¬¡æ ¡å‡†æ—¶é—´ï¼š</span>
                            <span class="text-sm text-slate-300">2024-03-20 14:30</span>
                        </div>
                        <div class="text-sm">
                            <div class="flex justify-between">
                                <span>é›¶ç‚¹æ¼‚ç§»ï¼š</span>
                                <span class="text-emerald-400">+0.12%</span>
                            </div>
                            <div class="flex justify-between">
                                <span>è·¨åº¦åå·®ï¼š</span>
                                <span class="text-rose-400">-0.45%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ“ä½œé¢æ¿ -->
                <div class="mt-6 flex flex-col sm:flex-row gap-4">
                    <button class="px-6 py-3 bg-emerald-600 hover:bg-emerald-500 rounded-lg" 
                            onclick="startAutoCalibration()">
                        ğŸš€ å¯åŠ¨è‡ªåŠ¨æ ¡å‡†
                    </button>
                    <button class="px-6 py-3 bg-sky-600 hover:bg-sky-500 rounded-lg"
                            onclick="startManualCalibration()">
                        ğŸ› ï¸ æ‰‹åŠ¨æ ¡å‡†æµç¨‹
                    </button>
                </div>
            </div>

            <!-- æ‰‹åŠ¨æ ¡å‡† -->
            <div class="bg-slate-700/50 rounded-lg p-6">
                <h3 class="text-xl font-bold mb-4">ğŸ”© æ‰‹åŠ¨æ ¡å‡†è®¾ç½®</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="space-y-4">
                        <div class="form-group">
                            <label>æ ¡å‡†æ°”ä½“æµ“åº¦ (ppm)</label>
                            <input type="number" class="calibration-input" 
                                   min="0" max="1000" value="50">
                        </div>
                        <div class="form-group">
                            <label>é›¶ç‚¹è°ƒæ•´ç³»æ•°</label>
                            <input type="range" class="calibration-slider" 
                                   min="-5" max="5" step="0.1" value="0">
                        </div>
                    </div>
                    <div class="space-y-4">
                        <div class="form-group">
                            <label>è·¨åº¦æ ¡å‡†ç‚¹ (ppm)</label>
                            <select class="calibration-select">
                                <option>25</option>
                                <option>50</option>
                                <option>100</option>
                                <option>200</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>å“åº”æ—¶é—´è°ƒæ•´ (s)</label>
                            <div class="flex gap-2">
                                <input type="number" class="w-20" value="3" min="1" max="10">
                                <button class="px-3 bg-slate-600 rounded-lg">æµ‹è¯•</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä»¿çœŸæµ‹è¯• -->
        <div id="simulation" class="tab-content hidden">
            <div class="test-simulation rounded-lg p-6">
                <h3 class="text-xl font-bold mb-6">ğŸ–¥ï¸ ä»¿çœŸæµ‹è¯•ç³»ç»Ÿ</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- ä¿¡å·å‘ç”Ÿå™¨ -->
                    <div class="space-y-4">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="gas-type-indicator bg-rose-400"></div>
                            <select class="gas-select bg-slate-600 px-4 py-2 rounded-lg">
                                <option value="CL2">æ°¯æ°” (Clâ‚‚)</option>
                                <option value="H2S">ç¡«åŒ–æ°¢ (Hâ‚‚S)</option>
                                <option value="CO">ä¸€æ°§åŒ–ç¢³ (CO)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>ç›®æ ‡æµ“åº¦ (ppm)</label>
                            <input type="number" class="simulation-input" 
                                   min="0" max="1000" value="100">
                        </div>
                        
                        <button class="w-full py-3 bg-rose-600 hover:bg-rose-500 rounded-lg"
                                onclick="startSimulation()">
                            âš¡ å¯åŠ¨ä»¿çœŸæµ‹è¯•
                        </button>
                    </div>

                    <!-- æµ‹è¯•ç»“æœ -->
                    <div class="p-4 rounded-lg bg-slate-600/50">
                        <div class="text-lg font-semibold mb-4">æµ‹è¯•ç»“æœåˆ†æ</div>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span>æŠ¥è­¦è§¦å‘ï¼š</span>
                                <span class="alarm-status text-rose-400">æœªè§¦å‘</span>
                            </div>
                            <div class="flex justify-between">
                                <span>å“åº”æ—¶é—´ï¼š</span>
                                <span class="response-time">--</span>
                            </div>
                            <div class="flex justify-between">
                                <span>è¯¯å·®èŒƒå›´ï¼š</span>
                                <span class="error-range">Â±0.00%</span>
                            </div>
                        </div>
                        
                        <div class="mt-4 p-3 rounded-lg bg-slate-500/30">
                            <div class="text-sm text-slate-300">è”åŠ¨ç­–ç•¥éªŒè¯ï¼š</div>
                            <div class="simulation-log text-xs mt-2"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<script>
class CalibrationSystem {
    constructor() {
        this.intervalId = null;
        this.calibrationSteps = [
            'é›¶ç‚¹æ ¡å‡†åˆå§‹åŒ–', 
            'åŸºå‡†æ°”ä½“æ³¨å…¥', 
            'ä¿¡å·ç¨³å®šæ€§æ£€æµ‹',
            'è·¨åº¦æ ¡å‡†è®¡ç®—',
            'æ ¡éªŒç»“æœåˆ†æ'
        ];
    }

    startAutoCalibration() {
        let step = 0;
        const progress = document.querySelector('.calibration-progress');
        const status = document.querySelector('.calibration-status');
        
        status.textContent = 'è¿›è¡Œä¸­...';
        status.classList.replace('text-emerald-400', 'text-amber-400');
        
        this.intervalId = setInterval(() => {
            step++;
            const percent = (step / this.calibrationSteps.length) * 100;
            progress.style.width = `${percent}%`;
            
            if(step >= this.calibrationSteps.length) {
                clearInterval(this.intervalId);
                status.textContent = 'æ ¡å‡†å®Œæˆ';
                status.classList.replace('text-amber-400', 'text-emerald-400');
                progress.style.width = '0%';
            }
        }, 2000);
    }
}

class SimulationSystem {
    constructor() {
        this.gasTypes = {
            CL2: { alarmThreshold: 10 },
            H2S: { alarmThreshold: 5 },
            CO: { alarmThreshold: 35 }
        };
    }

    startTest(gasType, concentration) {
        const startTime = Date.now();
        const alarmThreshold = this.gasTypes[gasType].alarmThreshold;
        const alarmStatus = document.querySelector('.alarm-status');
        const responseTime = document.querySelector('.response-time');
        const log = document.querySelector('.simulation-log');
        
        // æ¨¡æ‹Ÿä¼ æ„Ÿå™¨å“åº”
        setTimeout(() => {
            const elapsed = ((Date.now() - startTime)/1000).toFixed(1);
            responseTime.textContent = `${elapsed}s`;
            
            if(concentration >= alarmThreshold) {
                alarmStatus.textContent = 'è§¦å‘æŠ¥è­¦';
                alarmStatus.classList.add('text-rose-400');
                log.innerHTML = `
                    <div>ğŸ›‘ æŠ¥è­¦ä¿¡å·å‘å‡º (${gasType} > ${alarmThreshold}ppm)</div>
                    <div class="mt-1">âš¡ å¯åŠ¨æ’é£ç³»ç»Ÿ</div>
                    <div>ğŸ”” å£°å…‰æŠ¥è­¦æ¿€æ´»</div>
                `;
            } else {
                alarmStatus.textContent = 'æœªè§¦å‘';
                alarmStatus.classList.remove('text-rose-400');
                log.textContent = 'ç³»ç»Ÿè¿è¡Œæ­£å¸¸ï¼Œæœªè§¦å‘æŠ¥è­¦é˜ˆå€¼';
            }
        }, 1500);
    }
}

// åˆå§‹åŒ–ç³»ç»Ÿ
const calibrator = new CalibrationSystem();
const simulator = new SimulationSystem();

// äº¤äº’æ§åˆ¶
function startAutoCalibration() {
    calibrator.startAutoCalibration();
}

function startSimulation() {
    const gasType = document.querySelector('.gas-select').value;
    const concentration = parseFloat(document.querySelector('.simulation-input').value);
    simulator.startTest(gasType, concentration);
}

// é€‰é¡¹å¡åˆ‡æ¢
document.querySelectorAll('[data-tab]').forEach(btn => {
    btn.addEventListener('click', function() {
        // åˆ‡æ¢æ¿€æ´»çŠ¶æ€
        document.querySelectorAll('[data-tab]').forEach(t => 
            t.classList.remove('active-tab'));
        this.classList.add('active-tab');
        
        // æ˜¾ç¤ºå¯¹åº”å†…å®¹
        const tabId = this.dataset.tab;
        document.querySelectorAll('.tab-content').forEach(t => 
            t.classList.add('hidden'));
        document.getElementById(tabId).classList.remove('hidden');
    });
});
</script>
</body>
</html>