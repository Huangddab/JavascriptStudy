<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>设备校准测试系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#71717A] min-h-screen p-8">
    <div class="max-w-4xl mx-auto space-y-8">
        <!-- 自动校准模块 -->
        <div class="bg-gray-100 rounded-lg p-6 shadow-lg">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">自动校准系统</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- 自动校准控制 -->
                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <span class="text-gray-700">自动校准模式</span>
                        <label class="switch">
                            <input type="checkbox" id="autoMode" class="hidden">
                            <div class="w-12 h-6 bg-gray-300 rounded-full p-1 cursor-pointer">
                                <div class="w-4 h-4 bg-white rounded-full transition-transform duration-300"></div>
                            </div>
                        </label>
                    </div>
                    
                    <button onclick="startManualCalibration()" 
                            class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors">
                        手动启动校准
                    </button>
                    
                    <div class="mt-4 space-y-2">
                        <label class="flex items-center space-x-2">
                            <input type="radio" name="calType" checked class="form-radio">
                            <span>标准气体注入校准</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="radio" name="calType" class="form-radio">
                            <span>环境基准比对校准</span>
                        </label>
                    </div>
                </div>

                <!-- 校准状态显示 -->
                <div class="bg-gray-200 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">校准状态</h3>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span>当前状态：</span>
                            <span id="calStatus" class="font-medium">待机中</span>
                        </div>
                        <div class="h-2 bg-gray-300 rounded-full">
                            <div id="progressBar" class="h-full bg-green-500 rounded-full w-0 transition-all duration-500"></div>
                        </div>
                        <div class="text-sm text-gray-600" id="calResult"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 仿真测试模块 -->
        <div class="bg-gray-100 rounded-lg p-6 shadow-lg">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">仿真测试模式</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- 测试参数设置 -->
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-1">气体浓度 (ppm)</label>
                        <input type="number" id="gasValue" value="100" 
                               class="w-full p-2 border rounded-lg" placeholder="输入浓度值">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">气体类型</label>
                        <select class="w-full p-2 border rounded-lg">
                            <option>氯气</option>
                            <option>硫化氢</option>
                            <option>一氧化碳</option>
                        </select>
                    </div>
                    <button onclick="startSimulation()" 
                            class="w-full bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-lg transition-colors">
                        启动仿真测试
                    </button>
                </div>

                <!-- 测试结果展示 -->
                <div class="bg-gray-200 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">测试输出</h3>
                    <div class="space-y-2">
                        <div class="flex items-center">
                            <span class="w-24">报警状态：</span>
                            <div id="alarmLed" class="w-4 h-4 rounded-full bg-green-500"></div>
                        </div>
                        <div>
                            <span>联动策略：</span>
                            <span id="strategyOutput" class="font-medium">-</span>
                        </div>
                        <div class="text-sm text-gray-600" id="simulationLog"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 自动校准逻辑
        let calibrationInterval;
        function startManualCalibration() {
            document.getElementById('calStatus').textContent = '校准中...';
            document.getElementById('calResult').textContent = '';
            let progress = 0;
            
            calibrationInterval = setInterval(() => {
                progress += Math.random() * 10;
                if(progress >= 100) {
                    clearInterval(calibrationInterval);
                    document.getElementById('calStatus').textContent = '校准完成';
                    document.getElementById('calResult').textContent = '✅ 校准成功，偏差 < 0.5%';
                }
                document.getElementById('progressBar').style.width = `${Math.min(progress, 100)}%`;
            }, 200);
        }

        // 仿真测试逻辑
        function startSimulation() {
            const value = parseFloat(document.getElementById('gasValue').value);
            const alarmLed = document.getElementById('alarmLed');
            const log = document.getElementById('simulationLog');
            
            log.textContent = `测试启动：${value}ppm 氯气`;
            
            if(value > 50) {
                alarmLed.style.backgroundColor = '#ef4444';
                document.getElementById('strategyOutput').textContent = '触发排风系统、警报器';
            } else {
                alarmLed.style.backgroundColor = '#22c55e';
                document.getElementById('strategyOutput').textContent = '正常状态';
            }
        }

        // 自动模式切换
        document.getElementById('autoMode').addEventListener('change', (e) => {
            document.getElementById('calStatus').textContent = e.target.checked ? 
                '自动模式已启用' : '自动模式已禁用';
        });
    </script>

    <style>
        .switch input:checked + div {
            background-color: #3b82f6;
        }
        .switch input:checked + div > div {
            transform: translateX(24px);
        }
    </style>
</body>
</html>